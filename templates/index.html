{% extends "base.html" %}

{% block title %}Sonification Studio - Premium Audio Processing{% endblock %}

{% block content %}
{% include 'components/hero_section.html' %}

<!-- Encoding Section -->
<section id="encoding" class="section-padding">
    <div class="container">
        <h2 class="section-title">
            ðŸ’Ž Audio Encoding Studio 
            <span class="premium-badge">PREMIUM</span>
        </h2>
        <p class="section-subtitle">Transform text and images into audio with enterprise-grade customizable parameters</p>

        <div class="row">
            <div class="col-lg-8">
                <!-- Encoding Mode Selector -->
                <div class="card glass-card mb-4">
                    <div class="card-body">
                        <h5 class="card-title mb-3">
                            <i data-feather="settings" class="me-2"></i>
                            Encoding Mode
                        </h5>
                        <div class="btn-group w-100 mb-3" role="group">
                            <input type="radio" class="btn-check" name="encodingMode" id="textMode" value="text" checked>
                            <label class="btn btn-outline-primary" for="textMode">
                                <i data-feather="type" class="me-2"></i>Text to Audio
                            </label>

                            <input type="radio" class="btn-check" name="encodingMode" id="imageMode" value="image">
                            <label class="btn btn-outline-primary" for="imageMode">
                                <i data-feather="image" class="me-2"></i>Image to Audio
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Text Input Section -->
                <div id="textInputSection" class="card glass-card mb-4">
                    <div class="card-body">
                        <h5 class="card-title mb-3">
                            <i data-feather="edit-3" class="me-2"></i>
                            Text Input
                        </h5>

                        <div class="mb-3">
                            <textarea id="textInput" class="form-control" rows="4" 
                                placeholder="Enter your text here to convert to audio..."></textarea>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">Upload Text File</label>
                                <input type="file" class="form-control" id="textFileInput" accept=".txt">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Character Count</label>
                                <div class="input-group">
                                    <span class="input-group-text" id="charCount">0</span>
                                    <span class="input-group-text">characters</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Image Upload Section -->
                <div id="imageInputSection" class="card glass-card mb-4" style="display: none;">
                    <div class="card-body">
                        <h5 class="card-title mb-3">
                            <i data-feather="upload" class="me-2"></i>
                            Image Upload
                        </h5>

                        <div class="upload-zone" id="imageUploadZone">
                            <div class="upload-content">
                                <i data-feather="image" class="upload-icon"></i>
                                <h6>Drag & Drop Image Here</h6>
                                <p>or click to browse</p>
                                <input type="file" id="imageFileInput" accept="image/*" style="display: none;">
                            </div>
                        </div>

                        <div id="imagePreview" class="mt-3" style="display: none;">
                            <img id="previewImg" class="img-fluid rounded" style="max-height: 200px;">
                            <div class="mt-2">
                                <small class="text-muted" id="imageInfo"></small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Frequency Controls -->
                <div class="card glass-card mb-4">
                    <div class="card-body">
                        <h5 class="card-title mb-3">
                            <i data-feather="sliders" class="me-2"></i>
                            Frequency Controls
                        </h5>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">Frequency Range Preset</label>
                                <select class="form-select" id="frequencyPreset">
                                    <option value="custom">Custom Range</option>
                                    <option value="bass">Bass (200-800 Hz)</option>
                                    <option value="mid" selected>Mid (800-3000 Hz)</option>
                                    <option value="high">High (3000-8000 Hz)</option>
                                    <option value="full">Full (20-20000 Hz)</option>
                                </select>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <label class="form-label">Min Frequency (Hz)</label>
                                <input type="number" class="form-control" id="minFreq" value="800" min="20" max="19999">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Max Frequency (Hz)</label>
                                <input type="number" class="form-control" id="maxFreq" value="3000" min="21" max="20000">
                            </div>
                        </div>

                        <!-- Interactive Frequency Picker -->
                        <div class="mt-3">
                            <label class="form-label">Interactive Frequency Picker</label>
                            <canvas id="frequencyCanvas" width="600" height="100" class="frequency-canvas"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Generate Audio Button -->
                <div class="text-center">
                    <button type="submit" class="btn btn-premium btn-lg encode-btn me-2">
                        <i data-feather="zap" class="me-2"></i>
                        Generate Audio
                    </button>
                    <button type="button" class="btn btn-outline-premium clear-btn">
                        <i data-feather="trash-2" class="me-2"></i>
                        Clear
                    </button>
                </div>
            </div>

            <!-- Preview and Controls -->
            <div class="col-lg-4">
                <div class="card glass-card mb-4">
                    <div class="card-body">
                        <h5 class="card-title mb-3">
                            <i data-feather="bar-chart-2" class="me-2"></i>
                            Audio Visualization
                        </h5>
                        <div class="visualization-container">
                            <canvas id="waveformCanvas" width="300" height="150"></canvas>
                            <canvas id="spectrumCanvas" width="300" height="150"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Decoding Section -->
<section id="decoding" class="section-padding bg-light-glass">
    <div class="container">
        <h2 class="section-title">
            ðŸ”¬ Audio Decoding Lab 
            <span class="premium-badge">ENTERPRISE</span>
        </h2>
        <p class="section-subtitle">Advanced AI-powered decoding with professional-grade accuracy</p>

        <div class="row">
            <div class="col-lg-6">
                <div class="card glass-card mb-4">
                    <div class="card-body">
                        <h5 class="card-title mb-3">
                            <i data-feather="upload-cloud" class="me-2"></i>
                            Audio File Upload
                        </h5>

                        <div class="upload-zone" id="audioUploadZone">
                            <div class="upload-content">
                                <i data-feather="music" class="upload-icon"></i>
                                <h6>Drag & Drop Audio Here</h6>
                                <p>or click to browse (.wav files)</p>
                                <input type="file" id="audioFileInput" accept=".wav" style="display: none;">
                            </div>
                        </div>

                        <div class="mt-3">
                            <label class="form-label">Decoding Mode</label>
                            <div class="btn-group w-100" role="group">
                                <input type="radio" class="btn-check" name="decodingMode" id="decodeText" value="text" checked>
                                <label class="btn btn-outline-secondary" for="decodeText">
                                    <i data-feather="type" class="me-2"></i>To Text
                                </label>

                                <input type="radio" class="btn-check" name="decodingMode" id="decodeImage" value="image">
                                <label class="btn btn-outline-secondary" for="decodeImage">
                                    <i data-feather="image" class="me-2"></i>To Image
                                </label>

                                <input type="radio" class="btn-check" name="decodingMode" id="transcribe" value="transcribe">
                                <label class="btn btn-outline-secondary" for="transcribe">
                                    <i data-feather="mic" class="me-2"></i>Transcribe
                                </label>
                            </div>
                        </div>

                        <!-- Image Decoding Parameters -->
                        <div id="imageDecodingParams" class="mt-3" style="display: none;">
                            <div class="row">
                                <div class="col-6">
                                    <label class="form-label">Width</label>
                                    <input type="number" class="form-control" id="decodeWidth" value="100" min="1">
                                </div>
                                <div class="col-6">
                                    <label class="form-label">Height</label>
                                    <input type="number" class="form-control" id="decodeHeight" value="100" min="1">
                                </div>
                            </div>
                        </div>

                        <div class="text-center mt-3">
                            <button type="submit" class="btn btn-premium btn-lg decode-btn me-2" disabled>
                                <i data-feather="upload" class="me-2"></i>
                                Decode Audio
                            </button>
                            <button type="button" class="btn btn-outline-premium clear-btn">
                                <i data-feather="trash-2" class="me-2"></i>
                                Clear
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-6">
                <div class="card glass-card">
                    <div class="card-body">
                        <h5 class="card-title mb-3">
                            <i data-feather="file-text" class="me-2"></i>
                            Decoded Results
                        </h5>

                        <div id="decodedResults" class="results-container">
                            <div class="text-center text-muted">
                                <i data-feather="info" style="width: 48px; height: 48px;"></i>
                                <p class="mt-2">Upload an audio file to see decoded results here</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section id="features" class="section-padding">
    <div class="container">
        <h2 class="section-title">
            âš¡ Exclusive Premium Features 
            <span class="premium-badge">DIAMOND TIER</span>
        </h2>
        <p class="section-subtitle">Elite-level audio processing capabilities reserved for premium members</p>

        <div class="row">
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i data-feather="zap"></i>
                    </div>
                    <h5>High-Speed Processing</h5>
                    <p>Optimized algorithms for real-time audio generation and processing with minimal latency.</p>
                </div>
            </div>

            <div class="col-lg-4 col-md-6 mb-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i data-feather="settings"></i>
                    </div>
                    <h5>Custom Frequency Control</h5>
                    <p>Precise frequency range selection with interactive controls for optimal audio output.</p>
                </div>
            </div>

            <div class="col-lg-4 col-md-6 mb-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i data-feather="eye"></i>
                    </div>
                    <h5>Real-time Visualization</h5>
                    <p>Live waveform and spectrum analysis with professional-grade visualization tools.</p>
                </div>
            </div>

            <div class="col-lg-4 col-md-6 mb-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i data-feather="image"></i>
                    </div>
                    <h5>Image to Audio</h5>
                    <p>Convert images to audio frequencies with intelligent pixel-to-frequency mapping.</p>
                </div>
            </div>

            <div class="col-lg-4 col-md-6 mb-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i data-feather="mic"></i>
                    </div>
                    <h5>AI Transcription</h5>
                    <p>Advanced speech-to-text capabilities powered by OpenAI Whisper technology.</p>
                </div>
            </div>

            <div class="col-lg-4 col-md-6 mb-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i data-feather="download"></i>
                    </div>
                    <h5>High-Quality Export</h5>
                    <p>Professional WAV export with configurable sample rates and bit depths.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Results Section -->
<section id="results" class="section-padding bg-light-glass">
    <div class="container">
        <div id="resultSection" style="display: none;">
        </div>
    </div>
</section>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/app-minimal.js') }}"></script>
{% endblock %}